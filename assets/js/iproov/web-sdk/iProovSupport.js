var n,t;n=self,t=()=>(()=>{var n={914:(n,t,i)=>{n.exports=function n(t,i,r){function e(a,u){if(!i[a]){if(!t[a]){if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=i[a]={exports:{}};t[a][0].call(c.exports,function(n){var i=t[a][1][n];return e(i||n)},c,c.exports,n,t,i,r)}return i[a].exports}for(var o=void 0,a=0;a<r.length;a++)e(r[a]);return e}({1:[function(n,t,r){(function(n){"use strict";var i,r,e=n.MutationObserver||n.WebKitMutationObserver;if(e){var o=0,a=new e(f),u=n.document.createTextNode("");a.observe(u,{characterData:!0}),i=function(){u.data=o=++o%2}}else if(n.setImmediate||"undefined"==typeof n.MessageChannel)i="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var t=n.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},n.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var s=new n.MessageChannel;s.port1.onmessage=f,i=function(){s.port2.postMessage(0)}}var c=[];function f(){var n,t;r=!0;for(var i=c.length;i;){for(t=c,c=[],n=-1;++n<i;)t[n]();i=c.length}r=!1}function l(n){1!==c.push(n)||r||i()}t.exports=l}).call(this,"undefined"!=typeof i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(n,t,i){"use strict";var r=n(1);function e(){}var o={},a=["REJECTED"],u=["FULFILLED"],s=["PENDING"];function c(n){if("function"!=typeof n)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,n!==e&&h(this,n)}function f(n,t,i){this.promise=n,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function l(n,t,i){r(function(){var r;try{r=t(i)}catch(t){return o.reject(n,t)}r===n?o.reject(n,new TypeError("Cannot resolve promise with itself")):o.resolve(n,r)})}function d(n){var t=n&&n.then;if(n&&("object"==typeof n||"function"==typeof n)&&"function"==typeof t)return function(){t.apply(n,arguments)}}function h(n,t){var i=!1;function r(t){i||(i=!0,o.reject(n,t))}function e(t){i||(i=!0,o.resolve(n,t))}function a(){t(e,r)}var u=v(a);"error"===u.status&&r(u.value)}function v(n,t){var i={};try{i.value=n(t),i.status="success"}catch(n){i.status="error",i.value=n}return i}function w(n){return n instanceof this?n:o.resolve(new this(e),n)}function b(n){var t=new this(e);return o.reject(t,n)}function p(n){var t=this;if("[object Array]"!==Object.prototype.toString.call(n))return this.reject(new TypeError("must be an array"));var i=n.length,r=!1;if(!i)return this.resolve([]);for(var a=new Array(i),u=0,s=-1,c=new this(e);++s<i;)f(n[s],s);return c;function f(n,e){function s(n){a[e]=n,++u!==i||r||(r=!0,o.resolve(c,a))}t.resolve(n).then(s,function(n){r||(r=!0,o.reject(c,n))})}}function m(n){var t=this;if("[object Array]"!==Object.prototype.toString.call(n))return this.reject(new TypeError("must be an array"));var i=n.length,r=!1;if(!i)return this.resolve([]);for(var a=-1,u=new this(e);++a<i;)s(n[a]);return u;function s(n){t.resolve(n).then(function(n){r||(r=!0,o.resolve(u,n))},function(n){r||(r=!0,o.reject(u,n))})}}t.exports=c,c.prototype.catch=function(n){return this.then(null,n)},c.prototype.then=function(n,t){if("function"!=typeof n&&this.state===u||"function"!=typeof t&&this.state===a)return this;var i=new this.constructor(e);return this.state!==s?l(i,this.state===u?n:t,this.outcome):this.queue.push(new f(i,n,t)),i},f.prototype.callFulfilled=function(n){o.resolve(this.promise,n)},f.prototype.otherCallFulfilled=function(n){l(this.promise,this.onFulfilled,n)},f.prototype.callRejected=function(n){o.reject(this.promise,n)},f.prototype.otherCallRejected=function(n){l(this.promise,this.onRejected,n)},o.resolve=function(n,t){var i=v(d,t);if("error"===i.status)return o.reject(n,i.value);var r=i.value;if(r)h(n,r);else{n.state=u,n.outcome=t;for(var e=-1,a=n.queue.length;++e<a;)n.queue[e].callFulfilled(t)}return n},o.reject=function(n,t){n.state=a,n.outcome=t;for(var i=-1,r=n.queue.length;++i<r;)n.queue[i].callRejected(t);return n},c.resolve=w,c.reject=b,c.all=p,c.race=m},{1:1}],3:[function(n,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=n(2))}).call(this,"undefined"!=typeof i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(n,t,i){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(n){return}}var a=o();function u(){try{if(!a||!a.open)return!1;var n="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!n||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(n){return!1}}function s(n,t){n=n||[],t=t||{};try{return new Blob(n,t)}catch(e){if("TypeError"!==e.name)throw e;for(var i=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<n.length;r+=1)i.append(n[r]);return i.getBlob(t.type)}}"undefined"==typeof Promise&&n(3);var c=Promise;function f(n,t){t&&n.then(function(n){t(null,n)},function(n){t(n)})}function l(n,t,i){"function"==typeof t&&n.then(t),"function"==typeof i&&n.catch(i)}function d(n){return"string"!=typeof n&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function h(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var v="local-forage-detect-blob-support",w=void 0,b={},p=Object.prototype.toString,m="readonly",y="readwrite";function g(n){for(var t=n.length,i=new ArrayBuffer(t),r=new Uint8Array(i),e=0;e<t;e++)r[e]=n.charCodeAt(e);return i}function k(n){return new c(function(t){var i=n.transaction(v,y),r=s([""]);i.objectStore(v).put(r,"key"),i.onabort=function(n){n.preventDefault(),n.stopPropagation(),t(!1)},i.oncomplete=function(){var n=navigator.userAgent.match(/Chrome\/(\d+)/),i=navigator.userAgent.match(/Edge\//);t(i||!n||parseInt(n[1],10)>=43)}}).catch(function(){return!1})}function S(n){return"boolean"==typeof w?c.resolve(w):k(n).then(function(n){return w=n})}function E(n){var t=b[n.name],i={};i.promise=new c(function(n,t){i.resolve=n,i.reject=t}),t.deferredOperations.push(i),t.dbReady?t.dbReady=t.dbReady.then(function(){return i.promise}):t.dbReady=i.promise}function x(n){var t=b[n.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function _(n,t){var i=b[n.name].deferredOperations.pop();if(i)return i.reject(t),i.promise}function T(n,t){return new c(function(i,r){if(b[n.name]=b[n.name]||R(),n.db){if(!t)return i(n.db);E(n),n.db.close()}var e=[n.name];t&&e.push(n.version);var o=a.open.apply(a,e);t&&(o.onupgradeneeded=function(t){var i=o.result;try{i.createObjectStore(n.storeName),t.oldVersion<=1&&i.createObjectStore(v)}catch(i){if("ConstraintError"!==i.name)throw i;console.warn('The database "'+n.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+n.storeName+'" already exists.')}}),o.onerror=function(n){n.preventDefault(),r(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(n){n.target.close()},i(t),x(n)}})}function A(n){return T(n,!1)}function I(n){return T(n,!0)}function O(n,t){if(!n.db)return!0;var i=!n.db.objectStoreNames.contains(n.storeName),r=n.version<n.db.version,e=n.version>n.db.version;if(r&&(n.version!==t&&console.warn('The database "'+n.name+"\" can't be downgraded from version "+n.db.version+" to version "+n.version+"."),n.version=n.db.version),e||i){if(i){var o=n.db.version+1;o>n.version&&(n.version=o)}return!0}return!1}function B(n){return new c(function(t,i){var r=new FileReader;r.onerror=i,r.onloadend=function(i){var r=btoa(i.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})}function C(n){return s([g(atob(n.data))],{type:n.type})}function N(n){return n&&n.__local_forage_encoded_blob}function D(n){var t=this,i=t._initReady().then(function(){var n=b[t._dbInfo.name];if(n&&n.dbReady)return n.dbReady});return l(i,n,n),i}function j(n){E(n);for(var t=b[n.name],i=t.forages,r=0;r<i.length;r++){var e=i[r];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return n.db=null,A(n).then(function(t){return n.db=t,O(n)?I(n):t}).then(function(r){n.db=t.db=r;for(var e=0;e<i.length;e++)i[e]._dbInfo.db=r}).catch(function(t){throw _(n,t),t})}function P(n,t,i,r){void 0===r&&(r=1);try{var e=n.db.transaction(n.storeName,t);i(null,e)}catch(e){if(r>0&&(!n.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return c.resolve().then(function(){if(!n.db||"NotFoundError"===e.name&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),I(n)}).then(function(){return j(n).then(function(){P(n,t,i,r-1)})}).catch(i);i(e)}}function R(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function M(n){var t=this,i={db:null};if(n)for(var r in n)i[r]=n[r];var e=b[i.name];e||(e=R(),b[i.name]=e),e.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=D);var o=[];function a(){return c.resolve()}for(var u=0;u<e.forages.length;u++){var s=e.forages[u];s!==t&&o.push(s._initReady().catch(a))}var f=e.forages.slice(0);return c.all(o).then(function(){return i.db=e.db,A(i)}).then(function(n){return i.db=n,O(i,t._defaultConfig.version)?I(i):n}).then(function(n){i.db=e.db=n,t._dbInfo=i;for(var r=0;r<f.length;r++){var o=f[r];o!==t&&(o._dbInfo.db=i.db,o._dbInfo.version=i.version)}})}function L(n,t){var i=this;n=d(n);var r=new c(function(t,r){i.ready().then(function(){P(i._dbInfo,m,function(e,o){if(e)return r(e);try{var a=o.objectStore(i._dbInfo.storeName).get(n);a.onsuccess=function(){var n=a.result;void 0===n&&(n=null),N(n)&&(n=C(n)),t(n)},a.onerror=function(){r(a.error)}}catch(n){r(n)}})}).catch(r)});return f(r,t),r}function U(n,t){var i=this,r=new c(function(t,r){i.ready().then(function(){P(i._dbInfo,m,function(e,o){if(e)return r(e);try{var a=o.objectStore(i._dbInfo.storeName).openCursor(),u=1;a.onsuccess=function(){var i=a.result;if(i){var r=i.value;N(r)&&(r=C(r));var e=n(r,i.key,u++);void 0!==e?t(e):i.continue()}else t()},a.onerror=function(){r(a.error)}}catch(n){r(n)}})}).catch(r)});return f(r,t),r}function F(n,t,i){var r=this;n=d(n);var e=new c(function(i,e){var o;r.ready().then(function(){return o=r._dbInfo,"[object Blob]"===p.call(t)?S(o.db).then(function(n){return n?t:B(t)}):t}).then(function(t){P(r._dbInfo,y,function(o,a){if(o)return e(o);try{var u=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var s=u.put(t,n);a.oncomplete=function(){void 0===t&&(t=null),i(t)},a.onabort=a.onerror=function(){var n=s.error?s.error:s.transaction.error;e(n)}}catch(n){e(n)}})}).catch(e)});return f(e,i),e}function W(n,t){var i=this;n=d(n);var r=new c(function(t,r){i.ready().then(function(){P(i._dbInfo,y,function(e,o){if(e)return r(e);try{var a=o.objectStore(i._dbInfo.storeName).delete(n);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var n=a.error?a.error:a.transaction.error;r(n)}}catch(n){r(n)}})}).catch(r)});return f(r,t),r}function q(n){var t=this,i=new c(function(n,i){t.ready().then(function(){P(t._dbInfo,y,function(r,e){if(r)return i(r);try{var o=e.objectStore(t._dbInfo.storeName).clear();e.oncomplete=function(){n()},e.onabort=e.onerror=function(){var n=o.error?o.error:o.transaction.error;i(n)}}catch(n){i(n)}})}).catch(i)});return f(i,n),i}function z(n){var t=this,i=new c(function(n,i){t.ready().then(function(){P(t._dbInfo,m,function(r,e){if(r)return i(r);try{var o=e.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){n(o.result)},o.onerror=function(){i(o.error)}}catch(n){i(n)}})}).catch(i)});return f(i,n),i}function H(n,t){var i=this,r=new c(function(t,r){n<0?t(null):i.ready().then(function(){P(i._dbInfo,m,function(e,o){if(e)return r(e);try{var a=o.objectStore(i._dbInfo.storeName),u=!1,s=a.openKeyCursor();s.onsuccess=function(){var i=s.result;i?0===n||u?t(i.key):(u=!0,i.advance(n)):t(null)},s.onerror=function(){r(s.error)}}catch(n){r(n)}})}).catch(r)});return f(r,t),r}function V(n){var t=this,i=new c(function(n,i){t.ready().then(function(){P(t._dbInfo,m,function(r,e){if(r)return i(r);try{var o=e.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):n(a)},o.onerror=function(){i(o.error)}}catch(n){i(n)}})}).catch(i)});return f(i,n),i}function G(n,t){t=h.apply(this,arguments);var i=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||i.name,n.storeName=n.storeName||i.storeName);var r,e=this;if(n.name){var o=n.name===i.name&&e._dbInfo.db?c.resolve(e._dbInfo.db):A(n).then(function(t){var i=b[n.name],r=i.forages;i.db=t;for(var e=0;e<r.length;e++)r[e]._dbInfo.db=t;return t});r=n.storeName?o.then(function(t){if(t.objectStoreNames.contains(n.storeName)){var i=t.version+1;E(n);var r=b[n.name],e=r.forages;t.close();for(var o=0;o<e.length;o++){var u=e[o];u._dbInfo.db=null,u._dbInfo.version=i}var s=new c(function(t,r){var e=a.open(n.name,i);e.onerror=function(n){e.result.close(),r(n)},e.onupgradeneeded=function(){e.result.deleteObjectStore(n.storeName)},e.onsuccess=function(){var n=e.result;n.close(),t(n)}});return s.then(function(n){r.db=n;for(var t=0;t<e.length;t++){var i=e[t];i._dbInfo.db=n,x(i._dbInfo)}}).catch(function(t){throw(_(n,t)||c.resolve()).catch(function(){}),t})}}):o.then(function(t){E(n);var i=b[n.name],r=i.forages;t.close();for(var e=0;e<r.length;e++)r[e]._dbInfo.db=null;var o=new c(function(t,i){var r=a.deleteDatabase(n.name);r.onerror=function(){var n=r.result;n&&n.close(),i(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},r.onsuccess=function(){var n=r.result;n&&n.close(),t(n)}});return o.then(function(n){i.db=n;for(var t=0;t<r.length;t++)x(r[t]._dbInfo)}).catch(function(t){throw(_(n,t)||c.resolve()).catch(function(){}),t})})}else r=c.reject("Invalid arguments");return f(r,t),r}var K={_driver:"asyncStorage",_initStorage:M,_support:u(),iterate:U,getItem:L,setItem:F,removeItem:W,clear:q,length:z,key:H,keys:V,dropInstance:G};function X(){return"function"==typeof openDatabase}var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="~~local_forage_type~",Q=/^~~local_forage_type~([^~]+)~/,Y="__lfsc__:",Z=Y.length,nn="arbf",tn="blob",rn="si08",en="ui08",on="uic8",an="si16",un="si32",sn="ur16",cn="ui32",fn="fl32",ln="fl64",dn=Z+nn.length,hn=Object.prototype.toString;function vn(n){var t,i,r,e,o,a=.75*n.length,u=n.length,s=0;"="===n[n.length-1]&&(a--,"="===n[n.length-2]&&a--);var c=new ArrayBuffer(a),f=new Uint8Array(c);for(t=0;t<u;t+=4)i=$.indexOf(n[t]),r=$.indexOf(n[t+1]),e=$.indexOf(n[t+2]),o=$.indexOf(n[t+3]),f[s++]=i<<2|r>>4,f[s++]=(15&r)<<4|e>>2,f[s++]=(3&e)<<6|63&o;return c}function wn(n){var t,i=new Uint8Array(n),r="";for(t=0;t<i.length;t+=3)r+=$[i[t]>>2],r+=$[(3&i[t])<<4|i[t+1]>>4],r+=$[(15&i[t+1])<<2|i[t+2]>>6],r+=$[63&i[t+2]];return i.length%3==2?r=r.substring(0,r.length-1)+"=":i.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function bn(n,t){var i="";if(n&&(i=hn.call(n)),n&&("[object ArrayBuffer]"===i||n.buffer&&"[object ArrayBuffer]"===hn.call(n.buffer))){var r,e=Y;n instanceof ArrayBuffer?(r=n,e+=nn):(r=n.buffer,"[object Int8Array]"===i?e+=rn:"[object Uint8Array]"===i?e+=en:"[object Uint8ClampedArray]"===i?e+=on:"[object Int16Array]"===i?e+=an:"[object Uint16Array]"===i?e+=sn:"[object Int32Array]"===i?e+=un:"[object Uint32Array]"===i?e+=cn:"[object Float32Array]"===i?e+=fn:"[object Float64Array]"===i?e+=ln:t(new Error("Failed to get type for BinaryArray"))),t(e+wn(r))}else if("[object Blob]"===i){var o=new FileReader;o.onload=function(){var i=J+n.type+"~"+wn(this.result);t(Y+tn+i)},o.readAsArrayBuffer(n)}else try{t(JSON.stringify(n))}catch(i){console.error("Couldn't convert value into a JSON string: ",n),t(null,i)}}function pn(n){if(n.substring(0,Z)!==Y)return JSON.parse(n);var t,i=n.substring(dn),r=n.substring(Z,dn);if(r===tn&&Q.test(i)){var e=i.match(Q);t=e[1],i=i.substring(e[0].length)}var o=vn(i);switch(r){case nn:return o;case tn:return s([o],{type:t});case rn:return new Int8Array(o);case en:return new Uint8Array(o);case on:return new Uint8ClampedArray(o);case an:return new Int16Array(o);case sn:return new Uint16Array(o);case un:return new Int32Array(o);case cn:return new Uint32Array(o);case fn:return new Float32Array(o);case ln:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}var mn={serialize:bn,deserialize:pn,stringToBuffer:vn,bufferToString:wn};function yn(n,t,i,r){n.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,r)}function gn(n){var t=this,i={db:null};if(n)for(var r in n)i[r]="string"!=typeof n[r]?n[r].toString():n[r];var e=new c(function(n,r){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(n){return r(n)}i.db.transaction(function(e){yn(e,i,function(){t._dbInfo=i,n()},function(n,t){r(t)})},r)});return i.serializer=mn,e}function kn(n,t,i,r,e,o){n.executeSql(i,r,e,function(n,a){a.code===a.SYNTAX_ERR?n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(n,u){u.rows.length?o(n,a):yn(n,t,function(){n.executeSql(i,r,e,o)},o)},o):o(n,a)},o)}function Sn(n,t){var i=this;n=d(n);var r=new c(function(t,r){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(i){kn(i,e,"SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[n],function(n,i){var r=i.rows.length?i.rows.item(0).value:null;r&&(r=e.serializer.deserialize(r)),t(r)},function(n,t){r(t)})})}).catch(r)});return f(r,t),r}function En(n,t){var i=this,r=new c(function(t,r){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(i){kn(i,e,"SELECT * FROM "+e.storeName,[],function(i,r){for(var o=r.rows,a=o.length,u=0;u<a;u++){var s=o.item(u),c=s.value;if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=n(c,s.key,u+1)))return void t(c)}t()},function(n,t){r(t)})})}).catch(r)});return f(r,t),r}function xn(n,t,i,r){var e=this;n=d(n);var o=new c(function(o,a){e.ready().then(function(){void 0===t&&(t=null);var u=t,s=e._dbInfo;s.serializer.serialize(t,function(t,c){c?a(c):s.db.transaction(function(i){kn(i,s,"INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[n,t],function(){o(u)},function(n,t){a(t)})},function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(xn.apply(e,[n,u,i,r-1]));a(t)}})})}).catch(a)});return f(o,i),o}function _n(n,t,i){return xn.apply(this,[n,t,i,1])}function Tn(n,t){var i=this;n=d(n);var r=new c(function(t,r){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(i){kn(i,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[n],function(){t()},function(n,t){r(t)})})}).catch(r)});return f(r,t),r}function An(n){var t=this,i=new c(function(n,i){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){kn(t,r,"DELETE FROM "+r.storeName,[],function(){n()},function(n,t){i(t)})})}).catch(i)});return f(i,n),i}function In(n){var t=this,i=new c(function(n,i){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){kn(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,i){var r=i.rows.item(0).c;n(r)},function(n,t){i(t)})})}).catch(i)});return f(i,n),i}function On(n,t){var i=this,r=new c(function(t,r){i.ready().then(function(){var e=i._dbInfo;e.db.transaction(function(i){kn(i,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[n+1],function(n,i){var r=i.rows.length?i.rows.item(0).key:null;t(r)},function(n,t){r(t)})})}).catch(r)});return f(r,t),r}function Bn(n){var t=this,i=new c(function(n,i){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){kn(t,r,"SELECT key FROM "+r.storeName,[],function(t,i){for(var r=[],e=0;e<i.rows.length;e++)r.push(i.rows.item(e).key);n(r)},function(n,t){i(t)})})}).catch(i)});return f(i,n),i}function Cn(n){return new c(function(t,i){n.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,r){for(var e=[],o=0;o<r.rows.length;o++)e.push(r.rows.item(o).name);t({db:n,storeNames:e})},function(n,t){i(t)})},function(n){i(n)})})}function Nn(n,t){t=h.apply(this,arguments);var i=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||i.name,n.storeName=n.storeName||i.storeName);var r,e=this;return f(r=n.name?new c(function(t){var r;r=n.name===i.name?e._dbInfo.db:openDatabase(n.name,"","",0),n.storeName?t({db:r,storeNames:[n.storeName]}):t(Cn(r))}).then(function(n){return new c(function(t,i){n.db.transaction(function(r){function e(n){return new c(function(t,i){r.executeSql("DROP TABLE IF EXISTS "+n,[],function(){t()},function(n,t){i(t)})})}for(var o=[],a=0,u=n.storeNames.length;a<u;a++)o.push(e(n.storeNames[a]));c.all(o).then(function(){t()}).catch(function(n){i(n)})},function(n){i(n)})})}):c.reject("Invalid arguments"),t),r}var Dn={_driver:"webSQLStorage",_initStorage:gn,_support:X(),iterate:En,getItem:Sn,setItem:_n,removeItem:Tn,clear:An,length:In,key:On,keys:Bn,dropInstance:Nn};function jn(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(n){return!1}}function Pn(n,t){var i=n.name+"/";return n.storeName!==t.storeName&&(i+=n.storeName+"/"),i}function Rn(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch(n){return!0}}function Mn(){return!Rn()||localStorage.length>0}function Ln(n){var t=this,i={};if(n)for(var r in n)i[r]=n[r];return i.keyPrefix=Pn(n,t._defaultConfig),Mn()?(t._dbInfo=i,i.serializer=mn,c.resolve()):c.reject()}function Un(n){var t=this,i=t.ready().then(function(){for(var n=t._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var r=localStorage.key(i);0===r.indexOf(n)&&localStorage.removeItem(r)}});return f(i,n),i}function Fn(n,t){var i=this;n=d(n);var r=i.ready().then(function(){var t=i._dbInfo,r=localStorage.getItem(t.keyPrefix+n);return r&&(r=t.serializer.deserialize(r)),r});return f(r,t),r}function Wn(n,t){var i=this,r=i.ready().then(function(){for(var t=i._dbInfo,r=t.keyPrefix,e=r.length,o=localStorage.length,a=1,u=0;u<o;u++){var s=localStorage.key(u);if(0===s.indexOf(r)){var c=localStorage.getItem(s);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=n(c,s.substring(e),a++)))return c}}});return f(r,t),r}function qn(n,t){var i=this,r=i.ready().then(function(){var t,r=i._dbInfo;try{t=localStorage.key(n)}catch(n){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return f(r,t),r}function zn(n){var t=this,i=t.ready().then(function(){for(var n=t._dbInfo,i=localStorage.length,r=[],e=0;e<i;e++){var o=localStorage.key(e);0===o.indexOf(n.keyPrefix)&&r.push(o.substring(n.keyPrefix.length))}return r});return f(i,n),i}function Hn(n){var t=this.keys().then(function(n){return n.length});return f(t,n),t}function Vn(n,t){var i=this;n=d(n);var r=i.ready().then(function(){var t=i._dbInfo;localStorage.removeItem(t.keyPrefix+n)});return f(r,t),r}function Gn(n,t,i){var r=this;n=d(n);var e=r.ready().then(function(){void 0===t&&(t=null);var i=t;return new c(function(e,o){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+n,t),e(i)}catch(n){"QuotaExceededError"!==n.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==n.name||o(n),o(n)}})})});return f(e,i),e}function Kn(n,t){if(t=h.apply(this,arguments),!(n="function"!=typeof n&&n||{}).name){var i=this.config();n.name=n.name||i.name,n.storeName=n.storeName||i.storeName}var r,e=this;return r=n.name?new c(function(t){n.storeName?t(Pn(n,e._defaultConfig)):t(n.name+"/")}).then(function(n){for(var t=localStorage.length-1;t>=0;t--){var i=localStorage.key(t);0===i.indexOf(n)&&localStorage.removeItem(i)}}):c.reject("Invalid arguments"),f(r,t),r}var Xn={_driver:"localStorageWrapper",_initStorage:Ln,_support:jn(),iterate:Wn,getItem:Fn,setItem:Gn,removeItem:Vn,clear:Un,length:Hn,key:qn,keys:zn,dropInstance:Kn},$n=function(n,t){return n===t||"number"==typeof n&&"number"==typeof t&&isNaN(n)&&isNaN(t)},Jn=function(n,t){for(var i=n.length,r=0;r<i;){if($n(n[r],t))return!0;r++}return!1},Qn=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)},Yn={},Zn={},nt={INDEXEDDB:K,WEBSQL:Dn,LOCALSTORAGE:Xn},tt=[nt.INDEXEDDB._driver,nt.WEBSQL._driver,nt.LOCALSTORAGE._driver],it=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(it),et={description:"",driver:tt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(n,t){n[t]=function(){var i=arguments;return n.ready().then(function(){return n[t].apply(n,i)})}}function at(){for(var n=1;n<arguments.length;n++){var t=arguments[n];if(t)for(var i in t)t.hasOwnProperty(i)&&(Qn(t[i])?arguments[0][i]=t[i].slice():arguments[0][i]=t[i])}return arguments[0]}var ut=function(){function n(t){for(var i in e(this,n),nt)if(nt.hasOwnProperty(i)){var r=nt[i],o=r._driver;this[i]=o,Yn[o]||this.defineDriver(r)}this._defaultConfig=at({},et),this._config=at({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(n){if("object"===("undefined"==typeof n?"undefined":r(n))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in n){if("storeName"===t&&(n[t]=n[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof n[t])return new Error("Database version must be a number.");this._config[t]=n[t]}return!("driver"in n)||!n.driver||this.setDriver(this._config.driver)}return"string"==typeof n?this._config[n]:this._config},n.prototype.defineDriver=function(n,t,i){var r=new c(function(t,i){try{var r=n._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!n._driver)return void i(e);for(var o=rt.concat("_initStorage"),a=0,u=o.length;a<u;a++){var s=o[a];if((!Jn(it,s)||n[s])&&"function"!=typeof n[s])return void i(e)}var l=function(){for(var t=function(n){return function(){var t=new Error("Method "+n+" is not implemented by the current driver"),i=c.reject(t);return f(i,arguments[arguments.length-1]),i}},i=0,r=it.length;i<r;i++){var e=it[i];n[e]||(n[e]=t(e))}};l();var d=function(i){Yn[r]&&console.info("Redefining LocalForage driver: "+r),Yn[r]=n,Zn[r]=i,t()};"_support"in n?n._support&&"function"==typeof n._support?n._support().then(d,i):d(!!n._support):d(!0)}catch(n){i(n)}});return l(r,t,i),r},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(n,t,i){var r=Yn[n]?c.resolve(Yn[n]):c.reject(new Error("Driver not found."));return l(r,t,i),r},n.prototype.getSerializer=function(n){var t=c.resolve(mn);return l(t,n),t},n.prototype.ready=function(n){var t=this,i=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return l(i,n,n),i},n.prototype.setDriver=function(n,t,i){var r=this;Qn(n)||(n=[n]);var e=this._getSupportedDrivers(n);function o(){r._config.driver=r.driver()}function a(n){return r._extend(n),o(),r._ready=r._initStorage(r._config),r._ready}function u(n){return function(){var t=0;function i(){for(;t<n.length;){var e=n[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(e).then(a).catch(i)}o();var u=new Error("No available storage method found.");return r._driverSet=c.reject(u),r._driverSet}return i()}}var s=null!==this._driverSet?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=s.then(function(){var n=e[0];return r._dbInfo=null,r._ready=null,r.getDriver(n).then(function(n){r._driver=n._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=u(e)})}).catch(function(){o();var n=new Error("No available storage method found.");return r._driverSet=c.reject(n),r._driverSet}),l(this._driverSet,t,i),this._driverSet},n.prototype.supports=function(n){return!!Zn[n]},n.prototype._extend=function(n){at(this,n)},n.prototype._getSupportedDrivers=function(n){for(var t=[],i=0,r=n.length;i<r;i++){var e=n[i];this.supports(e)&&t.push(e)}return t},n.prototype._wrapLibraryMethodsWithReady=function(){for(var n=0,t=rt.length;n<t;n++)ot(this,rt[n])},n.prototype.createInstance=function(t){return new n(t)},n}(),st=new ut;t.exports=st},{3:3}]},{},[4])(4)}},t={};function i(r){var e=t[r];if(void 0!==e)return e.exports;var o=t[r]={exports:{}};return n[r](o,o.exports,i),o.exports}i.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return i.d(t,{a:t}),t},i.d=(n,t)=>{for(var r in t)i.o(t,r)&&!i.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),i.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),i.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var r={};return(()=>{"use strict";function n(n){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return i.reduce((n,t)=>n&&n[t],n)}i.r(r),i.d(r,{SUPPORT_EVENTS:()=>St,cameraPrompter:()=>vt,default:()=>Tt,handleDeviceOverrides:()=>mt,iProovSupport:()=>_t,testBrowser:()=>ft,testLocalStorage:()=>pt,testVideoInput:()=>lt});var t,e="",o="function",a="undefined",u="object",s="string",c="major",f="model",l="name",d="type",h="vendor",v="version",w="architecture",b="console",p="mobile",m="tablet",y="smarttv",g="wearable",k="embedded",S="user-agent",E="brands",x="fullVersionList",_="platform",T="platformVersion",A="bitness",I="sec-ch-ua",O=I+"-full-version-list",B=I+"-arch",C=I+"-bitness",N=I+"-mobile",D=I+"-model",j=I+"-platform",P=j+"-version",R=["brands","fullVersionList",p,f,"platform","platformVersion",w,"bitness"],M="browser",L="cpu",U="device",F="engine",W="os",q="result",z="Amazon",H="Apple",V="ASUS",G="BlackBerry",K="Google",X="Huawei",$="LG",J="Microsoft",Q="Motorola",Y="Samsung",Z="Sharp",nn="Sony",tn="Xiaomi",rn="Zebra",en="Mobile ",on=" Browser",an="Chrome",un="Firefox",sn="Opera",cn="Facebook",fn="Windows",ln=void 0,dn=function(n){for(var t in n){var i=n[t];typeof i==u&&2==i.length?this[i[0]]=i[1]:this[i]=void 0}return this},hn=function(n){for(var t={},i=0;i<n.length;i++)t[n[i].toUpperCase()]=n[i];return t},vn=function(n,t){if(typeof n===u&&n.length>0){for(var i in n)if(pn(n[i])==pn(t))return!0;return!1}return typeof n===s&&-1!==pn(t).indexOf(pn(n))},wn=function(n){for(var t in n)return/^(browser|cpu|device|engine|os)$/.test(t)},bn=function(n){if(n){for(var t=[],i=yn(/\\?\"/g,n).split(", "),r=0;r<i.length;r++){var e=i[r].split(";v=");t[r]={brand:e[0],version:e[1]}}return t}},pn=function(n){return typeof n===s?n.toLowerCase():n},mn=function(n){return typeof n===s?yn(/[^\d\.]/g,n).split(".")[0]:void 0},yn=function(n,t){return t.replace(n,e)},gn=function(n){return typeof n===s?yn(/\"/g,n):n},kn=function(n,t){if(typeof n===s)return n=yn(/^\s\s*/,n),typeof t===a?n:n.substring(0,350)},Sn=function(n,t){if(n&&t)for(var i,r,e,a,s,c,f=0;f<t.length&&!s;){var l=t[f],d=t[f+1];for(i=r=0;i<l.length&&!s&&l[i];)if(s=l[i++].exec(n))for(e=0;e<d.length;e++)c=s[++r],typeof(a=d[e])===u&&a.length>0?2===a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):void 0:this[a[0]]=c?a[1].call(this,c,a[2]):void 0:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):void 0):this[a]=c||void 0;f+=2}},En=function(n,t){for(var i in t)if(typeof t[i]===u&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(vn(t[i][r],n))return"?"===i?void 0:i}else if(vn(t[i],n))return"?"===i?void 0:i;return n},xn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},_n={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[l,en+"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,v],[/opios[\/ ]+([\w\.]+)/i],[v,[l,sn+" Mini"]],[/\bopr\/([\w\.]+)/i],[v,[l,sn]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[l,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[v,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[v,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure"+on],v],[/\bfocus\/([\w\.]+)/i],[v,[l,un+" Focus"]],[/\bopt\/([\w\.]+)/i],[v,[l,sn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[l,sn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[l,"MIUI"+on]],[/fxios\/([\w\.-]+)/i],[v,[l,en+un]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360"+on]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1"+on],v],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,v],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,cn],v],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[v,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[l,an+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,an+" WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[l,"Android"+on]],[/chrome\/([\w\.]+) mobile/i],[v,[l,en+"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,v],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[v,[l,en+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[l,en+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[v,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[v,En,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,v],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[l,en+un],v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[l,un+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,v],[/(cobalt)\/([\w\.]+)/i],[l,[v,/[^\d\.]+./,e]]],cpu:[[/\b(?:(amd|x|x86[-_]?|wow|win)64)\b/i],[[w,"amd64"]],[/(ia32(?=;))/i,/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,e,pn]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,pn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[h,Y],[d,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[h,Y],[d,p]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[h,H],[d,p]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[h,H],[d,m]],[/(macintosh);/i],[f,[h,H]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[h,Z],[d,p]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[h,X],[d,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[h,X],[d,p]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[h,tn],[d,p]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[h,tn],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[h,"OPPO"],[d,p]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[h,"Vivo"],[d,p]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[h,"Realme"],[d,p]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[h,Q],[d,p]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[h,Q],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[h,$],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[h,$],[d,p]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[h,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[h,"Nokia"],[d,p]],[/(pixel c)\b/i],[f,[h,K],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[h,K],[d,p]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[h,nn],[d,p]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[h,nn],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[h,"OnePlus"],[d,p]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[h,z],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[h,z],[d,p]],[/(playbook);[-\w\),; ]+(rim)/i],[f,h,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[h,G],[d,p]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[h,V],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[h,V],[d,p]],[/(nexus 9)/i],[f,[h,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[f,/_/g," "],[d,p]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[h,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[h,"Meizu"],[d,p]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,f,[d,p]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[h,f,[d,m]],[/(surface duo)/i],[f,[h,J],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[h,"Fairphone"],[d,p]],[/(shield[\w ]+) b/i],[f,[h,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[h,f,[d,p]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[h,J],[d,p]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[h,rn],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[h,rn],[d,p]],[/smart-tv.+(samsung)/i],[h,[d,y]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[h,Y],[d,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,$],[d,y]],[/(apple) ?tv/i],[h,[f,H+" TV"],[d,y]],[/crkey/i],[[f,an+"cast"],[h,K],[d,y]],[/droid.+aft(\w)( bui|\))/i],[f,[h,z],[d,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[h,Z],[d,y]],[/(bravia[\w ]+)( bui|\))/i],[f,[h,nn],[d,y]],[/(mitv-\w{5}) bui/i],[f,[h,tn],[d,y]],[/Hbbtv.*(technisat) (.*);/i],[h,f,[d,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,kn],[f,kn],[d,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,y]],[/(ouya)/i,/(nintendo) (\w+)/i],[h,f,[d,b]],[/droid.+; (shield) bui/i],[f,[h,"Nvidia"],[d,b]],[/(playstation \w+)/i],[f,[h,nn],[d,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[h,J],[d,b]],[/((pebble))app/i],[h,f,[d,g]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[h,H],[d,g]],[/droid.+; (glass) \d/i],[f,[h,K],[d,g]],[/droid.+; (wt63?0{2,3})\)/i],[f,[h,rn],[d,g]],[/(quest( 2| pro)?)/i],[f,[h,cn],[d,g]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[d,k]],[/(aeobc)\b/i],[f,[h,z],[d,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[d,p]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,p]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,v],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[v,En,xn]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,fn],[v,En,xn]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,"macOS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,v],[/\(bb(10);/i],[v,[l,G]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[l,un+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[v,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[v,[l,an+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,"Chrome OS"],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) (\w+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,v],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,v]]},Tn=(dn.call((t={init:{},isIgnore:{},isIgnoreRgx:{},toString:{}}).init,[[M,[l,v,c]],[L,[w]],[U,[d,f,h]],[F,[l,v]],[W,[l,v]]]),dn.call(t.isIgnore,[[M,[v,c]],[F,[v]],[W,[v]]]),dn.call(t.isIgnoreRgx,[[M,/ ?browser$/i],[W,/ ?os$/i]]),dn.call(t.toString,[[M,[l,v]],[L,[w]],[U,[h,f]],[F,[l,v]],[W,[l,v]]]),t),An=function(n,t,i,r){var o=Tn.init[n],u=Tn.isIgnore[n]||0,s=Tn.isIgnoreRgx[n]||0,c=Tn.toString[n]||0;function f(){dn.call(this,o)}return f.prototype.withClientHints=function(){return ln?ln.getHighEntropyValues(R).then(function(r){var e=new In(r,!1);return new On(n,t,i,e).parseCH().get()}):new On(n,t,i,r).parseCH().get()},n!=q&&(f.prototype.is=function(n){var t=!1;for(var i in this)if(this.hasOwnProperty(i)&&!vn(u,i)&&pn(s?yn(s,this[i]):this[i])==pn(s?yn(s,n):n)){if(t=!0,n!=a)break}else if(n==a&&t){t=!t;break}return t},f.prototype.toString=function(){var n=e;for(var t in c)typeof this[c[t]]!==a&&(n+=(n?" ":e)+this[c[t]]);return n||a}),ln||(f.prototype.then=function(n){var t=this,i=function(){for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};i.prototype={is:f.prototype.is,toString:f.prototype.toString};var r=new i;return n(r),r}),new f};function In(n,t){if(n=n||{},dn.call(this,R),t)dn.call(this,[[E,bn(n[I])],[x,bn(n[O])],[E,bn(n[I])],[p,/\?1/.test(n[N])],[f,gn(n[D])],[_,gn(n[j])],[T,gn(n[P])],[w,gn(n[B])],[A,gn(n[C])]]);else for(var i in n)this.hasOwnProperty(i)&&typeof n[i]!==a&&(this[i]=n[i]);return this}function On(n,t,i,r){dn.call(this,[["itemType",n],["ua",t],["uaCH",r],["rgxMap",i],["data",An(n,t,i,r)]]),this.parse();switch(this.itemType){case M:this.set(c,mn(this.get(v)));break;case U:case W:break;case q:var e=function(n){return new On(n,t,i[n],r).get()};this.set("ua",t).set(M,e(M)).set(L,e(L)).set(U,e(U)).set(F,e(F)).set(W,e(W)).get()}return this}function Bn(n,t,i){if(typeof n===u?(wn(n)?(typeof t===u&&(i=t),t=n):(i=n,t=void 0),n=void 0):typeof n!==s||wn(t)||(i=t,t=void 0),!(this instanceof Bn))return new Bn(n,t,i).getResult();var r=n||(i&&i[S]?i[S]:e),o=new In(i,!0),a=t?function(n,t){var i={};for(var r in n)i[r]=t[r]&&t[r].length%2==0?t[r].concat(n[r]):n[r];return i}(_n,t):_n,c=function(n){return function(){return new On(n,r,n==q?a:a[n],o).get()}};return dn.call(this,[["getBrowser",c(M)],["getCPU",c(L)],["getDevice",c(U)],["getEngine",c(F)],["getOS",c(W)],["getResult",c(q)],["getUA",function(){return r}],["setUA",function(n){return r=typeof n===s&&n.length>350?kn(n,350):n,this}]]).setUA(r),this}On.prototype.get=function(n){return n?this.data.hasOwnProperty(n)?this.data[n]:void 0:this.data},On.prototype.parse=function(){return this.itemType!=q&&Sn.call(this.data,this.ua,this.rgxMap),this},On.prototype.parseCH=function(){var n=this.ua,t=this.uaCH,i=this.rgxMap;switch(this.itemType){case M:var r=t[x]||t[E];if(r)for(var e in r){var o=r[e].brand,a=r[e].version;!/not.a.brand/i.test(o)&&(e<1||/chromi/i.test(this.get(l)))&&this.set(l,yn(K+" ",o)).set(v,a).set(c,mn(a))}break;case L:var u=t[w];u&&(u&&"64"==t[A]&&(u+="64"),Sn.call(this.data,u+";",i));break;case U:t[p]&&this.set(d,p),t[f]&&this.set(f,t[f]);break;case W:var s=t[_];if(s){var h=t[T];s==fn&&(h=parseInt(mn(h),10)>=13?"11":"10"),this.set(l,s).set(v,h)}break;case q:var b=function(r){return new On(r,n,i[r],t).parseCH().get()};this.set("ua",n).set(M,b(M)).set(L,b(L)).set(U,b(U)).set(F,b(F)).set(W,b(W))}return this},On.prototype.set=function(n,t){return this.data[n]=t,this},Bn.VERSION="2.0.0-alpha.2",Bn.BROWSER=hn([l,v,c]),Bn.CPU=hn([w]),Bn.DEVICE=hn([f,h,d,b,p,y,m,g,k]),Bn.ENGINE=Bn.OS=hn([l,v]);var Cn,Nn,Dn,jn=function(n,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(n):r?r.value:t.get(n)};const Pn=Symbol();class Rn extends Bn{constructor(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;super(n),Cn.add(this),this[Dn]=window.navigator.userAgentData&&"function"==typeof window.navigator.userAgentData?.getHighEntropyValues,this.getHighEntropyValues=async()=>{if(!this[Pn])return{};const n=window.navigator.userAgentData;return await n.getHighEntropyValues(["brands","mobile","platform","platformVersion","architecture","bitness","model","fullVersionList"])},this.userAgent=n}async getClientHintsWithHighEntropy(){const[n,t]=await Promise.all([this.getHighEntropyValues(),jn(this,Cn,"m",Nn).call(this)]);return{client_hints:{...t,...n}}}}Cn=new WeakSet,Dn=Pn,Nn=async function(){return["getBrowser","getCPU","getDevice","getEngine","getOS"].reduce((n,t)=>this[t]||"function"==typeof this[t].withClientHints?Object.assign(n,this[t]().withClientHints()):n,{})};var Mn=i(914),Ln=i.n(Mn);Symbol(),Symbol();const Un="iProovKeys";Ln().config({driver:Ln().INDEXEDDB});let Fn=!1;function Wn(n){return btoa(function(n){return String.fromCharCode.apply(null,new Uint8Array(n))}(n))}async function qn(n,t){return function(n){let t="";return n.forEach(n=>{t+=String.fromCharCode(n)}),btoa(t)}(function(n){const t=new Uint8Array(n),i=32,r=t.slice(0,i),e=t.slice(i),o=Hn(r),a=Hn(e),u=new Uint8Array(2+o.length+a.length);return u[0]=48,u[1]=o.length+a.length,u.set(o,2),u.set(a,2+o.length),u}(await crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},n,t instanceof ArrayBuffer?t:(new TextEncoder).encode(t))))}async function zn(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=null;if(Fn)try{t=await Ln().getItem(Un)}catch(t){n?.error("GK")}else n?.error("LFE");if(!t){const i=["sign","verify"];if(t=await async function(n,t){let{name:i,namedCurve:r}=n,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return await crypto.subtle.generateKey({name:i,namedCurve:r},e,t)}({name:"ECDSA",namedCurve:"P-256"},i),Fn)try{await Ln().setItem(Un,t)}catch(t){n?.error("SK")}}return t}function Hn(n){let t=0;for(;t<n.length-1&&0===n[t]&&!(128&n[t+1]);)t++;const i=n.slice(t),r=128&i[0]?1:0,e=i.length+r,o=new Uint8Array(2+e);return o[0]=2,o[1]=e,r>0&&(o[2]=0),o.set(i,2+r),o}Ln().ready().then(()=>{Fn=!0}).catch(()=>{Fn=!1});var Vn,Gn,Kn,Xn,$n,Jn,Qn,Yn,Zn,nt,tt,it=function(n,t,i,r,e){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!e)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?n!==t||!e:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?e.call(n,i):e?e.value=i:t.set(n,i),i},rt=function(n,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?n!==t||!r:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(n):r?r.value:t.get(n)};const et="iOS (Request Desktop Website)",ot="Android (Request Desktop Website)";async function at(){const t=n(i||window,"iProovNativeBridge")||function(t){return n(t||window,"webkit","messageHandlers","iProovNativeBridge")}();var i;return!!t}function ut(){try{return window.top!==window.self}catch(n){return!0}}function st(n){return"object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate}function ct(n){return"MediaDevices"in window&&window.MediaDevices.prototype&&"function"==typeof window.MediaDevices.prototype.getUserMedia}function ft(n){const{flags:t,detector:{browser:i,device:r,engine:e,os:o,ua:a}}=n;if(!i.name&&!e.name)return n.logger.error("Unable to support this unknown user agent: "+a),!1;const u="tablet"===r.type||"mobile"===r.type,s="iOS"===o.name;if(s&&parseFloat(o.version)<15&&t.in_iframe)return n.logger.error("Unable to support iFrame Bridge and iOS versions prior to 15. Please upgrade your iOS version"),!1;if("Safari"===i.name&&!u){const[t,r]=i.version.split(".");if("15"===t&&"0"===r)return n.logger.error("Unable to support Safari 15.0 due to Apple WebGL bug. Please upgrade to Safari 15.1."),!1;if(n.flags.in_iframe&&n.isNativeBridge&&s&&parseInt(t)<14)return n.logger.error("Unable to support Native Bridge in iOS < 14. Please upgrade your iOS version."),!1}return!0}function lt(n){return new Promise(async(t,i)=>{let r;try{r=await navigator.mediaDevices.enumerateDevices()}catch(n){return t(!1)}const e=r.filter(n=>"videoinput"===n.kind);if(0===e.length)return n.logger.warn("WARN: No video inputs identified"),t(!1);if(Array.from(new Set(e.filter(n=>""!==n.label))).length)return n.tests.frontCamera=!0,t(!0);const o=Array.from(new Set(e.map(n=>n.groupId)));return(o.length>1||""!==o[0])&&n.logger.debug("Video groups found: "+o.join(", ")),t(!0)})}function dt(n){return window.DeviceMotionEvent&&"function"==typeof window.DeviceMotionEvent.requestPermission?()=>new Promise(async(n,t)=>n("granted"===await window.DeviceMotionEvent.requestPermission())):null}async function ht(n){if(!window.DeviceMotionEvent)return!1;const t=dt();return null===t?!document.featurePolicy||["accelerometer","gyroscope","magnetometer"].every(n=>document.featurePolicy.allowsFeature(n)):await t(n)}function vt(n){return function(){return new Promise(async(t,i)=>{try{const i=await window.navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});n.logger.debug("Got a track with: "+i.getVideoTracks()[0].label),i.getVideoTracks()[0].stop(),t(!0)}catch(i){n.logger.error("Problem testing front camera: "+i.message),t(!1)}})}}async function wt(n){return vt(n)()}function bt(n){return document.fullscreenEnabled||document.webkitFullscreenEnabled||"iOS"===n.detector.os.name}function pt(){try{return!!window.localStorage}catch(n){return!1}}function mt(n){if(n.os.name&&n.os.name.match(/mac *os/i)&&window.navigator.maxTouchPoints>1&&(n.device.type="tablet",n.os.name="iOS",n.device.model=et,n.os.version=n.browser.version),n.device.model&&n.device.model.match(/iPhone/)&&(n.device.model=n.device.model+" "+(window.screen.height<=736?"8 (or older)":"X (or newer)")),!n.device.type&&n.os?.name?.match(/Android/i)&&(n.device.type="mobile"),"wearable"==n.device.type&&(n.device.type="mobile"),"mobile"!==n.device.type){const t=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.appVersion)[1],10)&&0===navigator.vendor.indexOf("Google");"Android"!==n.os.name&&t&&0===navigator.platform.indexOf("Linux a")&&"ontouchstart"in document.documentElement&&(n.device.type="mobile",n.os.name="Android",n.device.model=ot)}return n}const yt=["wasm","userMedia","videoInput","browser","localStorage"],gt=["fullscreen"],kt=["frontCamera"],St={CHECK:"check",GRANTED:"granted",DENIED:"denied",UNSUPPORTED:"unsupported"};class Et{constructor(){Vn.set(this,void 0),it(this,Vn,[],"f")}hasEventListener(n,t){return rt(this,Vn,"f").some(i=>i.type===n&&i.listener===t)}addEventListener(n,t){return this.hasEventListener(n,t)||rt(this,Vn,"f").push({type:n,listener:t,options:{once:!1}}),this}removeEventListener(n,t){const i=rt(this,Vn,"f").findIndex(i=>i.type===n&&i.listener===t);return i>=0&&rt(this,Vn,"f").splice(i,1),this}removeEventListeners(){return it(this,Vn,[],"f"),this}dispatchEvent(n){return rt(this,Vn,"f").filter(t=>t.type===n.type).forEach(t=>{const{type:i,listener:r,options:{once:e}}=t;r.call(this,n),!0===e&&this.removeEventListener(i,r)}),this}}Vn=new WeakMap;const xt={assuranceType:"genuine_presence"};class _t extends Et{constructor(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Gn.add(this),Kn.set(this,void 0),Xn.set(this,void 0),$n.set(this,void 0),Jn.set(this,void 0),this.logger=n,this.userAgent=new Rn,this.options=Object.assign({},xt,t),rt(this,Gn,"m",Qn).call(this)}getDetector(){return this.detector}reconfigure(n){return this.options=Object.assign({},xt,n),rt(this,Gn,"m",Yn).call(this)}detectNativeBridge(){return rt(this,$n,"f")||it(this,$n,at().then(n=>(n&&this.logger.debug("Native bridge is installed"),it(this,Kn,n,"f"),n)).catch(n=>{it(this,Kn,!1,"f"),this.logger.error("There was an error: "+n.message)}),"f"),rt(this,$n,"f")}get isDeviceSupported(){return rt(this,Kn,"f")||rt(this,Jn,"f").every(n=>!0===this.tests[n])}get isPermissionGranted(){return rt(this,Kn,"f")||this.permissionTests.every(n=>!0===this.tests[n])}get hasCheckedPermissions(){return this.permissionTests.every(n=>null!==this.tests[n])}async requestMotionPermission(){try{this.hasMotionPermission=this.hasMotionPermission||await this.testSupport.gyro()}catch(n){this.hasMotionPermission=!1}return this.hasMotionPermission}async checkWithPermission(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emit:!0};return await this.detectNativeBridge(),await this.check({emit:!1}),this.logger.log("LOG: Checking permission:"+this.permissionTests.join(", ")),await Promise.all(this.permissionTests.map(rt(this,Gn,"m",Zn).bind(this))),n.emit&&(this.isPermissionGranted?rt(this,Gn,"m",nt).call(this,St.GRANTED):rt(this,Gn,"m",nt).call(this,St.DENIED),rt(this,Gn,"m",tt).call(this)),{supported:this.isDeviceSupported,granted:this.isPermissionGranted,is_native_bridge:rt(this,Kn,"f"),flags:{...this.flags},tests:{...this.tests}}}async check(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emit:!0};return await this.detectNativeBridge(),await Promise.all(rt(this,Xn,"f").map(rt(this,Gn,"m",Zn).bind(this))),n.emit&&rt(this,Gn,"m",tt).call(this),{supported:this.isDeviceSupported,granted:this.isPermissionGranted,is_native_bridge:rt(this,Kn,"f"),flags:{...this.flags},tests:{...this.tests}}}async sign(n){return qn((await zn()).privateKey,n)}async getPublicKey(){const n=await zn();return await async function(n){return Wn(await crypto.subtle.exportKey("spki",n))}(n.publicKey)}telemetryCallback(){return{has_fullscreen_support:bt(this)}}}Kn=new WeakMap,Xn=new WeakMap,$n=new WeakMap,Jn=new WeakMap,Gn=new WeakSet,Qn=function(){it(this,Kn,void 0,"f"),this.flags={in_iframe:ut()},this.tests={videoInput:null,wasm:null,userMedia:null,frontCamera:null,fullscreen:null,browser:null,gyro:null,localStorage:null},this.permissionTests=[...kt],it(this,Jn,[...yt],"f"),it(this,Xn,[...yt,...gt],"f"),this.testSupport={videoInput:lt,wasm:st,userMedia:ct,frontCamera:wt,fullscreen:bt,browser:ft.bind(this),gyro:null,localStorage:pt},this.detector=mt(this.userAgent.getResult()),rt(this,Gn,"m",Yn).call(this),this.detectNativeBridge()},Yn=function(){["tablet","mobile"].includes(this.detector.device.type)&&(this.tests.gyro=null,this.testSupport.gyro=ht,"function"==typeof dt()?this.permissionTests.push("gyro"):rt(this,Xn,"f").push("gyro"),this.hasMotionPermission=!this.permissionTests.includes("gyro"))},Zn=async function(n){let t;return null!==this.tests[n]?(t=this.tests[n],t):(t=await this.testSupport[n](this),this.tests[n]=t,t||this.logger.warn("Test result for "+n+": "+t),t)},nt=function(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.dispatchEvent(new CustomEvent(n,{detail:{...t,tests:this.tests,is_native_bridge:rt(this,Kn,"f")}}))},tt=function(){rt(this,Gn,"m",nt).call(this,St.CHECK,{supported:this.isDeviceSupported,granted:this.hasCheckedPermissions?this.isPermissionGranted:null}),this.isDeviceSupported||rt(this,Gn,"m",nt).call(this,St.UNSUPPORTED,{supported:this.isDeviceSupported}),this.isPermissionGranted&&rt(this,Gn,"m",nt).call(this,St.GRANTED)};const Tt=_t})(),r})(),"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.iProovSupport=t():n.iProovSupport=t();